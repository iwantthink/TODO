# Linux学习笔记
[Linux教程](http://www.runoob.com/linux/linux-system-boot.html)
# 1. Linux系统启动过程

1. 内核的引导

2. 运行init

3. 系统初始化

4. 建立终端

5. 用户登录系统

	- 命令行登录

	- ssh登录

	- 图形界面登录

# 2. Linux系统目录结构

![](http://www.runoob.com/wp-content/uploads/2014/06/003vPl7Rty6E8kZRlAEdc690.jpg)

- /bin：

	bin是Binary的缩写, 这个目录存放着最经常使用的命令。

- /boot：

	这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。

- /dev ：

	dev是Device(设备)的缩写, 该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。

- /etc：

	这个目录用来存放所有的系统管理所需要的配置文件和子目录。

- /home：

	用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。

- /lib：

	这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。

- /lost+found：

	这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。

- /media：

	linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。

- /mnt：

	系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。

- /opt：

	这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。

- /proc：

	这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。

	这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：

		echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all

- /root：

	该目录为系统管理员，也称作超级权限者的用户主目录。

- /sbin：

	s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。

- /selinux：

	这个目录是Redhat/CentOS所特有的目录，Selinux是一个安全机制，类似于windows的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。

- /srv：

	该目录存放一些服务启动之后需要提取的数据。

- /sys：

	这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。

	sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。

	该文件系统是内核设备树的一个直观反映。

	当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。

- /tmp：

	这个目录是用来存放一些临时文件的。

- /usr：

	这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。

- /usr/bin：

	系统用户使用的应用程序。

- /usr/sbin：

	超级用户使用的比较高级的管理程序和系统守护程序。

- /usr/src：

	内核源代码默认的放置目录。

- /var：

	这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。


# 3. Linux远程登录

Linux一般作为服务器使用.服务器大多是在机房,那么久需要远程登录到Linux服务器来管理维护系统

Window系统上 Linux 远程登录客户端有`SecureCRT`, `Putty`, `SSH Secure Shell`等

# 4. Linux文件的基本属性

Linux系统是一种多用户系统,不同用户处于不同地位,拥有不同的权限.为了安全,Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。

**Linux中,可以使用`ll`或者`ls -l`命令来显示文件的属性以及文件所属的用户和组**

	ls - l
	drwxr-xr-x 2 root root  4096 Jun 15 15:19 analytics2
	drwxr-xr-x 2 root root  4096 Jun 19 14:19 analytics2-snapshot
	-rwxr-xr-x 1 root root  9558 Apr 13 16:45 bbr.sh

- 分别表示权限,,属主,属组,文件大小,日期,文件名

## 4.1 权限含义

![](http://www.runoob.com/wp-content/uploads/2014/06/363003_1227493859FdXT.png)

**Linux中,权限的第一个字符表示 这个文件是什么类型(文件,目录,链接文件等)**

- `[d]`:目录

- `[-]`:文件

- `[l]`:链接文档(link file)；

- `[b]`:装置文件里面的可供储存的接口设备(可随机存取装置)；

- `[c]`:装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。

**第一个字符之后,每三个字符为一组,均为`[rwx]`类型.这三个权限的位置固定不变,如果没有该权限则会用`[-]`符号表示**

- `[r]`代表可读
- `[w]`代表可写
- `[x]`代表可执行

**第0位确定文件类型，第1-3位确定属主（该文件的所有者）拥有该文件的权限。第4-6位确定属组（所有者的同组用户）拥有该文件的权限，第7-9位确定其他用户拥有该文件的权限。**

## 4.2 文件属主和属组

**Linux系统按文件所有者、文件所有者同组用户和其他用户来规定了不同的文件访问权限。**

- 对于文件,都有一个特定的所有者(即对该文件具有所有权的用户)

- 在Linux系统中，用户是按组分类的，一个用户属于一个或多个组.所以文件所有者以外的用户又可以分为文件所有者的同组用户和其他用户

**对于 root 用户来说，一般情况下，文件的权限对其不起作用。**

## 4.3 更改文件属性

1. `chgrp`:更改文件属组

	语法:

		`chgrp [-R] 属组名 文件名`

	- -R：递归更改文件属组，**就是在更改某个目录文件的属组时**，如果加上-R的参数，那么该目录下的所有文件的属组都会更改。

2. `chown`:更改文件属主,同时也可以更改文件属组

	语法:
		chown [–R] 属主名 文件名
		chown [-R] 属主名：属组名 文件名

3. `chmod`:更改文件9个属性

	Linux文件属性有俩种设置方法,**一种数字,一种符号**

	Linux文件权限有三种身份,分别是`owner/group/others`,这三个类型都有`read/write/execute`权限

	**`rwx`三个权限每一个都可以用数字来表示*,在用数字表示时,需要将这三个权限的数字相加
	
		r:4 w:2 x:1

		owner = rwx = 4+2+1 = 7
		group = rwx = 4+2+1 = 7
		others = --- = 0+0+0 = 0
	
	语法:

		 chmod [-R] xyz 文件或目录

	- xyz : 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。(x即为属主数字权限)
	- -R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更

4. `chomod`:另外一种更改权限的方式

	九个权限分别是由三种身份(`user/group/others`)组成,那么可以使用`u,g,o,a`来表示(a=all,即全部)

	语法:

		chmod	ugoa	+(加入)-(除去)=(设定)	rwx	文件或目录
		chmod u=rwx,g=rx,o=r  test1    // 修改 test1 权限
		chmod a-x test1 //去除所有文件的x权限

# 5. Linux文件与目录管理

Linux的目录为树状结构,最顶级的目录为根目录`/`.可以通过挂在将其他目录添加到树中,通过解除挂载去移除

- 绝对路径:

	路径的写法,由根目录`/`开头,例如:`/usr/share/doc/`

- 相对路径:

	路径的写法,例如由 `/usr/share/doc `要到 `/usr/share/man` 底下时，可以写成：` cd ../man` 

**常用的文件与目录相关的命令:**

1. `ls`: 列出目录

2. `cd`：切换目录

3. `pwd`：显示目前的目录

4. `mkdir`：创建一个新的目录

5. `rmdir`：删除一个空的目录

6. `cp`: 复制文件或目录

7. `rm`: 移除文件或目录

- **可以使用 `man [命令]` 来查看各个命令的使用文档，如 ：`man cp`。**

## 5.1 `ls`命令

**语法:**

	ls [OPTION]...[FILE]....

**常用选项与参数：**

- `-a` ：全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)

- `-d` ：仅列出目录本身，而不是列出目录内的文件数据(常用)

- `-l` ：长数据串列出，包含文件的属性与权限等等数据；(常用)

**`~` 代表root目录,例如:`ls -al ~` 列出root目录下所有的文件以及其属性**


## 5.2 `cd`命令

cd是`Change Directory`缩写

**语法:**

	cd [相对路径或绝对路径]

**示例:**

	//使用绝对路径 切换到 java目录
	cd /home/java
	//切换到 `/root`路径
	cd ~
	//切换到上一级目录
	cd ..

## 5.3 `pwd`命令

pwd是`Print Working Directory`的缩写.显示目前所在目录

**语法:**

	pwd [OPTION]

## 5.4 `mkdir`命令

mkdir是`make directory`缩写.创建目录

**语法:**

	mkdir [OPTION]...DIRECTORY...

**选项与参数：**

- `-m` ：配置文件的权限喔！直接配置，不需要管默认权限 (umask) 

- `-p` ：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！

**示例:**

	//-p 的使用
	mkdir -p test1/test2/test3
	//-m 的使用
	mkdir -m 711 test1

## 5.5 `rmdir`命令

删除空的目录

**语法:**

	rmdir [-p] 目录名称

**选项与参数:**

- -p ：连同下一级『空的』目录也一起删除

**不过要注意的是，这个 rmdir 仅能删除空的目录，你可以使用 rm 命令来删除非空目录。**

## 5.6 `cp`命令

cp即拷贝文件和目录

**语法:**
	
	cp [OPTION]... [-T] SOURCE DEST
	cp [OPTION]... SOURCE... DIRECTORY
	cp [OPTION]... -t DIRECTORY SOURCE...

**选项和参数:**

- `-a`：相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)

- `-d`：若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身；

- `-f`：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；

- `-i`：**若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)**

- `-l`：进行硬式连结(hard link)的连结档创建，而非复制文件本身；

- `-p`：连同文件的属性一起复制过去，而非使用默认属性(备份常用)；

- `-r`：递归持续复制，用於目录的复制行为；(常用)

- `-s`：复制成为符号连结档 (symbolic link)，亦即『捷径』文件；

- `-u`：若 destination 比 source 旧才升级 destination ！


## 5.7 `rm`命令

移除文件或目录

**语法:**

	rm [OPTION]... FILE...

**选项与参数：**

- `-f` ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
- `-i` ：**互动模式，在删除前会询问使用者是否动作**
- `-r` ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！


## 5.8 `mv`命令

移动文件与目录,或者修改名称

**语法:**

	mv [OPTION]... [-T] SOURCE DEST
	mv [OPTION]... SOURCE... DIRECTORY
	mv [OPTION]... -t DIRECTORY SOURCE...

**选项与参数：**

- `-f` ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
- `-i` ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
- `-u` ：若目标文件已经存在，且 source 比较新，才会升级 (update)


## 5.9 Linux文件内容查看

Linux系统使用以下命令查看文件的内容:

### 5.9.1 cat

由第一行开始显示文件内容

**语法:**

	cat [OPTION]...[FILE]...

**选项与参数：**

- `-A` ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
- `-b` ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
- `-E` ：将结尾的断行字节 $ 显示出来；
- `-n` ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；
- `-T` ：将 [tab] 按键以 ^I 显示出来；
- `-v` ：列出一些看不出来的特殊字符

### 5.9.2 tac

由最后一行开始显示文件内容

**语法:**

	tac [OPTION]...[FILE]...

### 5.9.3 nl

显示行号

**语法:**

	nl [OPTION]...[FILE]...

**选项与参数：**

- `-b` ：指定行号指定的方式，主要有两种：
- `-b a` ：表示不论是否为空行，也同样列出行号(类似 cat -n)；
- `-b t` ：如果有空行，空的那一行不要列出行号(默认值)；
- `-n` ：列出行号表示的方法，主要有三种：
- `-n ln` ：行号在荧幕的最左方显示；
- `-n rn` ：行号在自己栏位的最右方显示，且不加 0 ；
- `-n rz` ：行号在自己栏位的最右方显示，且加 0 ；

- `-w` :行号栏位的占用的位数


### 5.9.3 more
一页一页翻动

**语法:**

	more [-dlfpcsu] [-num] [+/pattern] [+linenum] [file ...]

**在 more 这个程序的运行过程中，你有几个按键可以按的：**

- 空白键 (space)：代表向下翻一页；
- Enter         ：代表向下翻『一行』；
- /字串         ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；
- :f            ：立刻显示出档名以及目前显示的行数；
- q             ：代表立刻离开 more ，不再显示该文件内容。
- b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。

### 5.9.4 less

一页一页翻动



**less运行时可以输入的命令有：**

- 空白键    ：向下翻动一页；
- [pagedown]：向下翻动一页；
- [pageup]  ：向上翻动一页；
- /字串     ：向下搜寻『字串』的功能；
- ?字串     ：向上搜寻『字串』的功能；
- n         ：重复前一个搜寻 (与 / 或 ? 有关！)
- N         ：反向的重复前一个搜寻 (与 / 或 ? 有关！)
- q         ：离开 less 这个程序；

### 5.9.5 head

取出文件前面几行

**语法:**

	head [OPTION]... [FILE]...

**选项与参数:**

- `-n` ：后面接数字，代表显示几行的意思

	**默认的情况中，显示前面 10 行！若要显示前 20 行，就得要这样：**

### 5.9.6 tail

取出文件后面几行

**语法:**

	tail [OPTION]...[FILE]...

**选项与参数:**

- `-n` ：后面接数字，代表显示几行的意思
- `-f` ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c才会结束tail的侦测

# 6. Linux用户和用户组管理

## 6.1 添加新的用户

**语法:**

	useradd [options] LOGIN
	useradd -D
	useradd -D [options]

# 7. Linux磁盘管理

磁盘管理直接影响到整个系统的性能

**最常用的三个磁盘管理命令为:`df,du,fdist`**

- `df`:列出文件系统的整体磁盘使用量

- `du`:检查磁盘空间使用量

- `fdisk`: 用于磁盘分区

# 8. Linux vi/vim

所有的Unix Like 系统都会内建vi文本编辑器,其他的文本编辑器不一定会存在

[vim键位](http://www.runoob.com/w3cnote/all-vim-cheatsheat.html)

## 8.1 什么是vim?

`Vim`是从 `vi` 发展出来的一个文本编辑器,包含代码补完、编译及错误跳转等方便编程的功能

[vim官网](http://www.vim.org/)

## 8.2 vi/vim的使用

`vi/vim`可以分为三种模式: **命令模式(Command mode),输入模式(Insert mode),底线命令模式(Last line mode)**

![](http://www.runoob.com/wp-content/uploads/2014/07/vim-vi-workmodel.png)

### 8.2.1 命令模式

用户执行`vi/vim`命令,即进入了命令模式.**此状态下,敲击键盘的动作会被vim识别为命令,而非输入字符**

**常用命令:**

- `i`:切换到输入模式

- `x`:删除当前光标所在处的字符

- `:`:切换到底线命令模式,用来在最底下的一行输入命令

**命令模式只有一些最基本的命令,需要依靠底线命令模式输入更多的命令**

命令注意大小写的区分
---
**光标移动**

- 光标的移动可以通过方向键 或是 键盘上的hjkl(对应左下上右)

- 默认位移的单位 为1,可以在输入方向之前输入想要位移的数量.例如:`10j`=向下移动10单位

- `[CTRL+f]`:屏幕**向下**移动一页,相当于[Page Down]

- `[CTRL+b]`:屏幕**向上**移动一页,相当于[Page Up]

- `[CTRL+d]`:屏幕**向下**移动半页

- `[CTRL+u]`:屏幕**向上**移动半页

- `+`:光标移动到非空格符的下一行

- `-`:光标移动到非空格符的上一行

- `n<space>	`:n是数字,代表光标向后移动n个字符.例如,`20<space>`光标会向后移动20个字符

- `0 或功能键[Home]	`:移动到这一行的首字符处

- `$ 或功能键[End]	`:移动到这一行的尾字符处

- `H	`:光标移动到这个屏幕的最上方那一行的第一个字符

- `M	`:光标移动到这个屏幕的中央那一行的第一个字符

- `L	`:光标移动到这个屏幕的最下方那一行的第一个字符

- `G	`:移动到这个档案的最后一行(常用)

- `nG	n`: 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 20 行(可配合 :set nu)

- `gg	`:移动到这个档案的第一行，相当于 1G 啊！ (常用)

- `n<Enter>	`:n为数字。光标向下移动 n 行(常用)

---
**删除,复制和粘贴,搜索替换**

- `x, X`:在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) (常用)

- `nx`:n 为数字，连续向后删除 n 个字符。举例:连续删除 10 个字符 = `10x`

- `dd`:删除游标所在的那一整行(常用)

- `ndd`:n 为数字。删除光标所在的向下 n 行.举例:`20dd` 则是删除 20 行 (常用)

- `d1G`:删除光标所在到第一行的所有数据

- `dG`:删除光标所在到最后一行的所有数据

- `d$`:删除游标所在处，到该行的最后一个字符

- `d0`:那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符

- `yy`:复制游标所在的那一行(常用)

- `nyy`:n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行(常用)

- `y1G`:复制游标所在行到第一行的所有数据

- `yG`:复制游标所在行到最后一行的所有数据

- `y0`:复制光标所在的那个字符到该行行首的所有数据

- `y$`:复制光标所在的那个字符到该行行尾的所有数据

- `p, P`:p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用)

- `J`:将光标所在行与下一行的数据结合成同一行

- `c`:重复删除多个数据，例如向下删除 10 行，[ 10cj ]

- `u`:复原前一个动作。(常用)

- `[Ctrl]+r`:重做上一个动作。(常用)

	这个 u 与 [Ctrl]+r 是很常用的指令！一个是复原，另一个则是重做一次～ 利用这两个功能按键

- `.`:这就是小数点！意思是重复前一个动作的意思。 如果想要重复删除、重复贴上等等动作，按下小数点`.`就好了！ (常用)


### 8.2.2 输入模式

在命令模式中按下`i` 即进入输入模式

**常用按键:**

- `字符按键以及Shift组合`: 输入字符
- `ENTER 回车键`:换行
- `BACK SPACE，退格键`:删除光标前一个字符
- `DEL 删除键`:删除光标后一个字符
- `方向键`:在文本中移动光标
- `HOME/END`:移动光标到行首/行尾
- `Page Up/Page Down`，上/下翻页
- `Insert`:切换光标为输入/替换模式，光标将变成竖线/下划线
- `ESC`:**退出输入模式，切换到命令模式**

命令模式->输入模式
---

- `i, I`:进入输入模式(Insert mode)：

	i 为『从目前光标所在处输入』， I 为『在目前所在行的第一个非空格符处开始输入』。 (常用)

- `a, A`:进入输入模式(Insert mode)：

	a 为『从目前光标所在的下一个字符处开始输入』， A 为『从光标所在行的最后一个字符处开始输入』。(常用)

- `o, O`:进入输入模式(Insert mode)：

	这是英文字母 o 的大小写。o 为『在目前光标所在的下一行处输入新的一行』； O 为在目前光标所在处的上一行输入新的一行！(常用)

- `r, R`:进入取代模式(Replace mode)：

	r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 ESC 为止；(常用)

### 8.2.3 底线命令模式

在命令模式中敲击`:`即可进入.

底线命令模式中可以输入单个或多个字符的命令

**基本命令:**

- `q`:退出程序

- `w`:保存文件

**按`ESC`可以随时退出底线命令模式**

命令注意大小写的区分
---

- `:n1,n2s/word1/word2/g`:n1 与 n2 为数字。意思是:在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2 

	举例来说，在 100 到 200 行之间搜寻 vbird 并取代为 VBIRD 则：
『:100,200s/vbird/VBIRD/g』。(常用)

- `:1,$s/word1/word2/g`:从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！(常用)

- `:1,$s/word1/word2/gc`:从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！**且在取代前显示提示字符给用户确认 (confirm) 是否需要取代**！(常用)


---

- `:w`:将编辑的数据写入硬盘档案中(常用)

- `:w!`:若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关啊！

- `:q`:离开 vi (常用)

- `:q!`:若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。

	**注意:那个惊叹号 (!) 在 vi 当中，常常具有『强制』的意思**

- `:wq`:储存后离开，若为 :wq! 则为强制储存后离开 (常用)

- `ZZ`:**大写的`Z`**！若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！

- `:w [filename]`:将编辑的数据储存成另一个档案（类似另存新档）

- `:r [filename]`:在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 这个档案内容加到游标所在行后面

- `:n1,n2 w [filename]`:将 n1 到 n2 的内容储存成 filename 这个档案。

- `:! command`:暂时离开 vi 到指令行模式下执行 command 的显示结果！
	例如:`:! ls /home`即可在 vi 当中察看 /home 底下以 ls 输出的档案信息！

- `:set nu`:显示行号，设定之后，会在每一行的前缀显示该行的行号

- `:set nonu`:与 set nu 相反，为取消行号！

# 9. Linux `yum`命令

`yum（ Yellow dog Updater, Modified）`是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。

基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。

yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。

**语法:**

